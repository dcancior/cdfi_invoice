<?xml version="1.0" encoding="utf-8"?>
<odoo>
	<record id="view_sale_order_form_inherit" model="ir.ui.view">
		<field name="name">sale.order.form.inherit</field>
		<field name="model">sale.order</field>
		<field name="inherit_id" ref="sale.view_order_form" />
		<field name="arch" type="xml">
            <xpath expr="//notebook" position="inside">
                <page name="info_cdfi" string="CFDI">
                        <group cols="4">
                            <group string="Detalles de Pago">
                            	<field name="methodo_pago"/>
								<field name="forma_pago_id"/>
                            	<field name="uso_cfdi_id"/>
                            </group>
                        </group>
                </page>
            </xpath>
		</field>
	</record>

   
    <record id="view_order_tree_inherit_add_cfdi_emitido" model="ir.ui.view">
    <field name="name">sale.order.tree.inherit.add.cfdi.emitido</field>
    <field name="model">sale.order</field>
    <field name="inherit_id" ref="sale.view_order_tree"/>
    <field name="arch" type="xml">
      <!-- AÃ±adir verde si es 'invoiced' o 'cfdi_emitido' -->
      <xpath expr="//tree" position="attributes">
        <attribute name="decoration-success">invoice_status == 'invoiced' or invoice_status == 'cfdi_emitido'</attribute>
      </xpath>

      <!-- Mantener el MISMO campo: invoice_status -->
      <xpath expr="//field[@name='invoice_status']" position="replace">
        <field name="invoice_status" widget="badge" optional="show"
               decoration-success="invoice_status == 'invoiced' or invoice_status == 'cfdi_emitido'"
               decoration-info="invoice_status == 'to invoice'"
               decoration-warning="invoice_status == 'upselling'"/>
      </xpath>
    </field>
  </record>
</odoo>
